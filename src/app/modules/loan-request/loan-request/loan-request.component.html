<app-header></app-header>
<p-fieldset [toggleable]="true"legend="Поиск">
  <div class="flex justify-content-center align-content-center ml-8">
    <div class="col-4">
      <div class=" flex _right ">
        <label for="float-input"  class="label-size">Регистрационный номер:</label>
        <input [(ngModel)]="registerNumber" class="p-inputtext-sm ml-1" id="float-input" pInputText type="text">
      </div>
      <div class="mt-2 _right flex justify-content-between align-content-center">
        <label for="float-input" class="label-size">Имя клиента:</label>
        <input [(ngModel)]="idClientNumber" class="p-inputtext-sm ml-1" id="id-client-number" pInputText type="text">
      </div>
      <div class="mt-2 _right flex justify-content-between align-content-center ml-8">
        <label for="float-input" class="label-size">Валюта:</label>
        <input [(ngModel)]="clientName" class="p-inputtext-sm ml-1" id="client-name" pInputText type="text">
      </div>
    </div>
    <div class="col-4 ml-2">
      <div class=" _right flex justify-content-between align-content-center">
        <label for="float-input" class="label-size">Имя клиента :</label>
        <input [(ngModel)]="currency" class="p-inputtext-sm ml-1" id="currency" pInputText type="text">
      </div>
      <div class="mt-2 _right flex justify-content-between align-content-center ml-8">
        <label for="float-input" class="label-size">Тип клиента :</label>
        <input [(ngModel)]="creditStatus" class="p-inputtext-sm ml-1" id="credit status" pInputText type="text">
      </div>
      <div class="mt-2 _right flex justify-content-between align-content-center">
        <label for="float-input" class="label-size"> Cумма :</label>
        <input [(ngModel)]="termOfUseTheLoan" class="p-inputtext-sm ml-1" pInputText type="text">
      </div>
    </div>
    <div class="col-4">
      <div class=" _right flex justify-content-between align-content-center">
        <label for="float-input" class="label-size">Дата подачи заявки:</label>
        <input [(ngModel)]="dataFrom" class="p-inputtext-sm ml-1" pInputText type="date">
      </div>
      <div class="mt-2 _right flex justify-content-between align-content-center">
        <label for="float-input" class="label-size">Срок использования кредита  :</label>
        <input [(ngModel)]="dataTo" class="p-inputtext-sm ml-1" pInputText type="date">
      </div>
      <button pButton pRipple  style="background-color:#6D90A3;margin-left: 250px" label="Search"  icon="pi pi-search" class=" mt-4" (click)="search()" ></button>
    </div>
  </div>
</p-fieldset>
<p-toast></p-toast>
<div class="card">
  <p-toolbar styleClass="p-mb-4">
    <ng-template pTemplate="left">
      <button pButton pRipple style="background-color:#6D90A3" label="Открытия новой кредитной заявки" icon="pi pi-plus" class="p-button-sm p-mr-2" (click)="openNew()"></button>
    </ng-template>
    <ng-template pTemplate="right">

      <button pButton pRipple style="background-color:#6D90A3" label="Export" (click)="exportExcel()" icon="pi pi-upload" class=" p-button-sm"></button>
    </ng-template>
  </p-toolbar>
  <p-table id="excel-table"  #dt [value]="products" [rows]="5" [paginator]="true" [globalFilterFields]="['name','country.name','representative.name','status']"
           [(selection)]="selectedProducts" [rowHover]="true" dataKey="id"  styleClass="p-datatable-gridlines"
           [showCurrentPageReport]="true">
    <ng-template pTemplate="header">
      <tr class="w-auto">
        <th style="background-color: #6D90A3;color: white">Операция</th>
        <th pSortableColumn="RegistrationNumber" class="w-10rem h-1rem" style="background-color: #6D90A3;color: white">Регистрационный номер</th>
        <th pSortableColumn="Status"  style="background-color: #6D90A3;color: white">Статус  </th>
        <th pSortableColumn="ClientId" style="background-color: #6D90A3;color: white">ID клиента</th>
        <th pSortableColumn="ClientName" style="background-color: #6D90A3;color: white">Имя клиента</th>
        <th pSortableColumn="ClientType" style="background-color: #6D90A3;color: white">Тип клиента</th>
        <th pSortableColumn="Amount" style="background-color: #6D90A3;color: white">Cумма</th>
        <th pSortableColumn="ApplicationDate" style="background-color: #6D90A3;color: white">Дата подачи заявки</th>
        <th pSortableColumn="TermUse" class="w-10rem h-1rem" style="background-color: #6D90A3;color: white">Срок использования кредита</th>
        <th pSortableColumn="Currency" style="background-color: #6D90A3;color: white">Валюта </th>
        <th pSortableColumn="InterestRate" style="background-color: #6D90A3;color: white">Процентная ставка </th>
        <th pSortableColumn="LoanType" style="background-color: #6D90A3;color: white">Вид кредит  </th>
        <th pSortableColumn="LoanPurpose" style="background-color: #6D90A3;color: white">Цель кредит </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" class="table-height">
      <tr *ngFor="let data of tableList">
        <td><i class="pi pi-align-justify cursor-pointer"(click)="openMenu(menu.toggle($event), idClientNumber)" style="font-size: 20px; color: #6D90A3"></i></td>
        <td>{{data.regNumber}}</td>
        <td>{{data.Status}}</td>
        <td>{{data.clientID}}</td>
        <td>{{data.clientName}}</td>
        <td>{{data.clientType}}</td>
        <td>{{data.Amount}}</td>
        <td>{{data.Date}}</td>
        <td>{{data.loanMaturityDate}}</td>
        <td>{{data.Currency}}</td>
        <td>{{data.interestRate}}</td>
        <td>{{data.loanType}}</td>
        <td>{{data.loanPurpose}}
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>





<p-dialog [(visible)]="productDialog" [modal]="true" [style]="{width: '1300px'}" header="новой кредитной заявки" styleClass="p-fluid">
  <app-dialog></app-dialog>
  <div class="flex justify-content-between align-content-center">
  <button pButton class="p-button-success w-10rem " (click)="productDialog=false">Сохранит </button>
  <button pButton class="p-button-info w-auto " (click)="productDialog=false">Сохранит и отправит в НИКИ и АСОКИ  </button>
  </div>
</p-dialog>

<p-dialog [(visible)]="viewLoanReq" [modal]="true" [style]="{width: '1200px'}" header=""
          styleClass="p-fluid">
  <h3 class="text-center text-bluegray-600">View details of the loan request</h3>
  <div class="flex justify-content-center align-content-center mt-1">
    <div class="col-2">
      <h4 class="text-bluegray-600">Registration number:</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Client ID  number:</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Name</h4>
    </div>
    <div class="col-2">
      <p>string</p>
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Surname</h4>
    </div>
    <div class="col-2">
      <p>string</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Birth Date</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Type of certification code</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>


  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Name of certification code</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Who issued the certification document</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Serial number of document</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
  </div>
  <hr>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Date of issue of the certification document</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Number of document</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Gender code</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Gender Name</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Name of type of certification</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Date issue of the certification</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Borrower type name</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Who issued the certification r</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600"> Document Number</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
  </div>
  <hr>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2"><h4 class="text-bluegray-600">Application type name</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2"><h4 class="text-bluegray-600">Subject type code</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600"> Date of application</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">   Subject type name</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2"><h4 class="text-bluegray-600">Code of credit type</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">      Name of loan type</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">     Loan Maturity date</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>

    <div class="col-2"><h4 class="text-bluegray-600">
      Estimated number of employees</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">     Interest rate</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
  </div>
  <hr>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2"><h4 class="text-bluegray-600">Loan amount</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Credit purpose code</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Lending purpose name</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-3">
      <h4 class="text-bluegray-600">     Loan Maturity date</h4>
    </div>
    <div class="col-2">
      <p>123123123123</p>
    </div>
    <div class="col-7 mt-5  ml-23">
      <button class="p-button-success p-button-sm w-5rem" (click)="viewLoanReq=false" icon="pi pi-check-square"  label="Ok" pButton pRipple
              style="background-color: #00a0b4"></button>
    </div>

  </div>


</p-dialog>

<p-dialog [(visible)]="updateLoanReq" [modal]="true" [style]="{width: '1200px'}" header="Update Loan Request" styleClass="p-fluid">
    <form>
  <div class="flex justify-content-center align-content-center mt-1">
    <div class="col-2">
      <h4 class="text-bluegray-600">Client ID</h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Регистрационный номер заявки</h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Срок использования кредита</h4>
    </div>
    <div class="col-2">
      <input type="date" pInputText class="h-2rem">
    </div>
  </div>
  <hr>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Фамилия </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Имя </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Отчество </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>


  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Дата рождения </h4>
    </div>
    <div class="col-2">
      <input type="date" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Серия документа </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Код вида удостоверяющего документа </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>

  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Название вида удостоверяющего документа </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Дата выдачи удостоверяющего документа </h4>
    </div>
    <div class="col-2">
      <input type="date" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Кем выдан удостоверяющий документ </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Код половой принадлежности </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Название половой принадлежности </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Код типа заёмщика </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Название типа заёмщика </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Номер документа </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600"> Document Number</h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>
  <hr>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2"><h4 class="text-bluegray-600">Код вида заявки </h4>
    </div>
    <div class="col-2">
      <input type="text"  pInputText class="h-2rem">
    </div>
    <div class="col-2"><h4 class="text-bluegray-600">Название вида заявки </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Код типа субъекта </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Название типа субъекта </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2"><h4 class="text-bluegray-600">Дата подачи заявки</h4>
    </div>
    <div class="col-2">
      <input type="date" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Код вида кредитования </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2">
      <h4 class="text-bluegray-600">Название вида кредитования </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>

    <div class="col-2">
      <h4 class="text-bluegray-600">Юридический номер заявки </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Код нормативно-правового акта </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>

  <div class="flex justify-content-center align-content-center">
    <div class="col-2"><h4 class="text-bluegray-600">Название нормативно-правового акта </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Код валюты кредита</h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Название валюты кредита</h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>
  <div class="flex justify-content-center align-content-center">
    <div class="col-2"><h4 class="text-bluegray-600">Сумма кредита </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Процентная ставка</h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Код цели кредитования </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>

  <div class="flex justify-content-center align-content-center">
    <div class="col-2"><h4 class="text-bluegray-600">Название цели кредитования</h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Предполагаемое количество работников</h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
    <div class="col-2">
      <h4 class="text-bluegray-600">Код цели кредитования </h4>
    </div>
    <div class="col-2">
      <input type="text" pInputText class="h-2rem">
    </div>
  </div>
  <div class="flex justify-content-between align-content-center mt-2">
      <div class=" col-2">
        <button class="p-button-success p-button-sm " (click)="updateLoanReq=false" icon="pi pi-times-circle"  label="Cancel" pButton pRipple
                style="background-color: #00a0b4"></button>
      </div>
      <div class="col-2">
        <button class="p-button-success p-button-sm " (click)="updateLoanRequest()" icon="pi pi-pencil" label="UpdateLoanRequest" pButton pRipple
                style="background-color: #00a0b4"></button>
      </div>
    </div>
  </form>
</p-dialog>

<p-dialog [(visible)]="dialogForRejectedLoan" [modal]="true" [style]="{width: '1100px'}"
          header="Rejection of a loan application" styleClass="p-fluid">
  <div class="flex w-auto">
    <div class="col-10">
      <label class="label-size" for="float-input">Register Number:</label>
    </div>
    <div class="col-1">
      <input [placeholder]="registerId" class="p-inputtext-sm ml-1" pInputText type="text">
    </div>
  </div>
  <div class="flex w-auto">
    <div class="col-9">
      <label class="label-size" for="float-input">The code of the credit institution:</label>
    </div>
    <div class="col-1">
      <input class="p-inputtext-sm " pInputText style="width: 50px!important; " type="text">
    </div>
    <div class="col-1">
      <input class="p-inputtext-sm " pInputText type="text">
    </div>
  </div>
  <div class="flex w-auto">
    <div class="col-10">
      <label class="label-size" for="float-input">Legal number of the rejection decision:</label>
    </div>
    <div class="col-1">
      <input class="p-inputtext-sm ml-1" pInputText type="text">
    </div>
  </div>
  <div class="flex w-auto">
    <div class="col-10">
      <label class="label-size" for="float-input">Date of the decision to reject:</label>
    </div>
    <div class="col-1">
      <input class="p-inputtext-sm ml-1" pInputText type="date">
    </div>
  </div>
  <div class="flex w-auto">
    <div class="col-9">
      <label class="label-size" for="float-input">Application rejection reason code:</label>
    </div>
    <div class="col-1">
      <input class="p-inputtext-sm ml-1" pInputText style="width: 50px!important;" type="text">
    </div>
    <div class="col-1">
      <input class="p-inputtext-sm ml-1" pInputText type="text">
    </div>
  </div>
  <div class="flex justify-content-between align-content-center mt-2">
    <div class=" col-2">
      <button class="p-button-success p-button-sm " (click)="dialogForRejectedLoan=false" icon="pi pi-times-circle" label="Cancel" pButton pRipple
              style="background-color: #00a0b4">
      </button>
    </div>
    <div class="col-2">
      <button class="p-button-success p-button-sm " (click)="rejectedLoanReq()" icon="pi pi-directions-alt" label="Reject" pButton pRipple
              style="background-color: #00a0b4"></button>
    </div>
  </div>
</p-dialog>



<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
<p-menu #menu [popup]="true" [model]="items"></p-menu>
